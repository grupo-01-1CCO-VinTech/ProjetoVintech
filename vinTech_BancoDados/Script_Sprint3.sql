CREATE DATABASE Vin_tech_Sprint3;

USE Vin_tech_Sprint3;

CREATE TABLE Empresa (
	idEmpresa INT PRIMARY KEY AUTO_INCREMENT,
	CNPJEmpresa CHAR(18),
	nomeEmpresa VARCHAR(60),
	nomeFantasia VARCHAR(45),
	cepEmpresa CHAR(9),
	logradouroEmpresa VARCHAR(60),
	numeroLogradouro INT,
	bairroEmpresa VARCHAR(45),
	cidadeEmpresa VARCHAR(50),
	ufEmpresa CHAR(2),
	telefoneEmpresa CHAR(16),
	telefoneSecEmpresa CHAR(16),
	emailEmpresa VARCHAR(60)
);

CREATE TABLE Funcionario (
	idFuncionario INT PRIMARY KEY AUTO_INCREMENT,
	nomeFuncionario VARCHAR(45),
	fkChefe INT,
	FOREIGN KEY (fkChefe) REFERENCES Funcionario (idFuncionario),
	imagemUsuario TEXT,
	senhaFuncionario VARCHAR(45),
	emailFuncionario VARCHAR(60),
	fkEmpresa INT,
	FOREIGN KEY (fkEmpresa) REFERENCES Empresa (idEmpresa)
);

CREATE TABLE Plantacao (
	idPlantacao INT PRIMARY KEY AUTO_INCREMENT,
	nomePlantacao VARCHAR(45),
	cidadePlantacao varchar(50),
	ufPlantacao char(2),
	fkEmpresa INT,
	FOREIGN KEY (fkEmpresa) REFERENCES Empresa (idEmpresa)
);

CREATE TABLE Uva (
	idUva INT PRIMARY KEY AUTO_INCREMENT,
	nomeUva VARCHAR(45),
	tempMax DECIMAL(4,2),
	tempMin DECIMAL(4,2),
	umidMax INT(2),
	umidMin INT(2)
);

CREATE TABLE Estufa (
	idEstufa INT PRIMARY KEY AUTO_INCREMENT,
	nomeEstufa VARCHAR(45),
	areaEstufa INT,
	fkPlantacao INT,
	fkUva INT,
	FOREIGN KEY (fkPlantacao) REFERENCES Plantacao (idPlantacao),
	FOREIGN KEY (fkUva) REFERENCES Uva (idUva)
);

CREATE TABLE Sensor (
	idSensor INT PRIMARY KEY AUTO_INCREMENT,
	localSensor VARCHAR(45),
	fkEstufa INT,
	FOREIGN KEY (fkEstufa) REFERENCES Estufa (idEstufa)
);

CREATE TABLE Registro (
	idRegistro INT PRIMARY KEY AUTO_INCREMENT,
	temperaturaRegistro DECIMAL(4,2),
	umidadeRegistro DECIMAL(4,2),
	dataRegistro DATETIME,
	fkSensor INT,
	FOREIGN KEY (fkSensor) REFERENCES Sensor (idSensor)
);
			
-- select nomeEstufa, idSensor, umidadeRegistro, temperaturaRegistro, nomeUva, tempMax, tempMin, umidMax, umidMin
-- from registro, (select max(idregistro) as idRegistro
-- from registro group by fkSensor) as idRecente, sensor, estufa, plantacao, empresa, uva
-- where idRecente.idRegistro = registro.idRegistro and
-- Registro.fkSensor = idSensor and fkEstufa = idEstufa and fkPlantacao = idPlantacao and fkEmpresa = 1 and fkUva = idUva;

INSERT INTO Empresa VALUES (NULL, '13.264.837/0001-90', 'TechGrape & Cia', 'TechGrape', '04030-050', 'Rua Abel Salazar', 456, 'Ibirapuera', 'SÃ£o Paulo', 'SP', '(11)96214-6159', '(11)98522-2543', 'TechGrape@tech.grape.org');

INSERT INTO Funcionario VALUES (NULL, 'Manoel Carlos Andrade', NULL, 'data:image/jpeg;base64,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', 'manoel1234', 'manoel@tech.grape.org',1),
			       (NULL, 'Joao Sampaio Neto', 1, 'data:image/jpeg;base64,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', 'joao1234', 'joao@tech.grape.org', 1);
								

INSERT INTO Uva VALUES (NULL, 'Pinot Noir', 17.00, 10.00, 75, 12),                       
		       (NULL, 'CarmÃ©nÃ¨re', 15.80, 5.30, 43, 05),
		       (NULL, 'Syrah', 18.20, 13.85, 82, 23),                       
	               (NULL, 'Tempranillo', 15.80, 5.30, 21, 01),
		       (NULL, 'Merlot', 24.23, 12.72, 72, 34);	

-- Aqui para realizar este INSERT precisa de ter uma empresa cadastrada, cadastre pela pÃ¡gina de cadastro
DESC Plantacao;
INSERT INTO Plantacao VALUES (NULL, 'PlantaÃ§Ã£o Manaus', 'Manaus', 'AM', 1),
			     (NULL, 'PlantaÃ§Ã£o JundiaÃ­', 'JundaÃ­', 'SP', 1);

-- SÃ³ de INSERT na estufa, caso queira testar e nÃ£o tenha configurado na tela de DashboardConfig.html 
DESC Estufa;
INSERT INTO Estufa VALUES (NULL, 'Estufa Pinot Noir 001', 100, 1, 1),	
			  (NULL, 'Estufa Merlot 001', 155, 1, 5),
			  (NULL, 'Estufa Syrah 002', 222, 1, 3),
			  (NULL, 'Estufa CarmÃ©nÃ¨re 003', 155, 2, 2),
			  (NULL, 'Estufa Tempranillo 001', 456, 2, 4),
			  (NULL, 'Estufa Pinot Noir 002', 145, 2, 1); 

DESC Sensor;
INSERT INTO Sensor values (NULL,'Corredor 3', 1),
			  (NULL, 'Corredor 5', 2),
			  (NULL, 'Corredor 1', 3), 
			  (NULL, 'Corredor 12', 4),
			  (NULL, 'Corredor 2', 5),
			  (NULL, 'Corredor 6', 6);

-- Se quiser testar aqui com outros sensores, mude a fkSensor
DESC Registro; 

-- Estufa 001 Pinot Noir
INSERT INTO Registro VALUES (NULL, 14, 45, now(), 1);

-- Estufa 002 Merlot
INSERT INTO Registro VALUES (NULL, 12, 80, now(), 2);

-- Estufa 003 Syrah
INSERT INTO Registro VALUES (NULL, 29, 53, now(), 3);

-- Estufa 004 CarmÃ©nÃ¨re
INSERT INTO Registro VALUES (NULL, 10.55, 23, now(), 4);

-- Estufa 005 Tempranillo
INSERT INTO Registro VALUES (NULL, 23, 59, now(), 5);

-- Estufa 006 Pinot Noir
INSERT INTO Registro VALUES (NULL, 12, 57, now(), 6);

SELECT * FROM Empresa;
SELECT * FROM Funcionario;
SELECT * FROM Plantacao;
SELECT * FROM Estufa;
SELECT * FROM Uva;
SELECT * FROM Sensor;
SELECT * FROM Registro;

SELECT 
	idEstufa, nomeEstufa, nomeUva, tempMax, tempMin, umidMax, umidMin, temperaturaRegistro, umidadeRegistro, MAX(dataRegistro)
FROM 
	Estufa, Uva, Registro, empresa, 
	(SELECT idPlantacao FROM plantacao, empresa WHERE fkEmpresa = idEmpresa AND idEmpresa = 1) AS plantaEmpresa
WHERE
	fkUva = idUva AND fkSensor = idEstufa and plantaEmpresa.idPlantacao = fkPlantacao AND
	dataRegistro = (SELECT MAX(dataRegistro) FROM registro) GROUP BY idEstufa ORDER BY dataRegistro DESC;
